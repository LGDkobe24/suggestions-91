## 2 编程惯用法

### 建议8：利用assert语句来发现问题

断言（assert）在很多语言中都存在，它主要为调试程序服务，能够快速方便地检查程序的异常或者发行不恰当的输入等，可防止意想不到的情况出现。Python自1.5版本开始引入断言语句，其基本语法如下：  

    assert expression1 ["," expression2]

其中计算expression1的值会返回True或者False，当值位False的时候会引发AssertionErroe，而expression2是可选的，常用来传递具体的异常信息。

**对Python中使用断言需要说明如下：**

1. __debug__的值默认设置为True，且是只读的，在Python2.7中还无法修改该值。
2. 断言是有代价的，它会对性能产生一定的影响。对于编译型的语言，如C/C++，这也许并不那么重要，因为断言只在调试模式中启用。但Python并没有严格定义调试和发布模式之间的区别，通常禁用断言的方法是在运行脚本的时候加上`-O`标志，这种方式带来的影响是它并不优化字节码，而是忽略与断言相关的语句。  

**断言实际是被设计用来捕获用户所定义的约束的，而不是用来捕获程序本身错误的，因此使用断言需要注意一下几点：**

1. 不要滥用，这是使用断言的最基本的原则。
2. 如果Python本身的异常能够处理就不要再使用断言。
3. 不要使用断言来检查用户的输入。
4. 在函数调用后，当需要确认返回值是否合理是可以使用断言。
5. 当条件是业务逻辑继续下去的先决条件是可以使用断言。
